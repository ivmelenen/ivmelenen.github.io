(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,6919,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return n}});let n=e=>{}},70065,e=>{"use strict";var t=e.i(29511),r=e.i(47163);function n({className:e,...n}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,r.cn)("flex flex-col gap-4 border-[3px] border-foreground bg-background text-foreground rounded-none shadow-none p-4",e),...n})}function a({className:e,...n}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("flex flex-col gap-1 border-b-[3px] border-foreground pb-3",e),...n})}function o({className:e,...n}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("font-bold text-lg leading-tight",e),...n})}function i({className:e,...n}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("flex flex-col gap-3",e),...n})}function l({className:e,...n}){return(0,t.jsx)("div",{"data-slot":"card-footer",className:(0,r.cn)("flex items-center gap-2 border-t-[3px] border-foreground pt-3",e),...n})}e.s(["Card",()=>n,"CardContent",()=>i,"CardFooter",()=>l,"CardHeader",()=>a,"CardTitle",()=>o])},9737,e=>{"use strict";var t=e.i(29511),r=e.i(58138);function n({animation:e}){let n=(0,r.useRef)(null),a=(0,r.useRef)(null),o=(0,r.useRef)(0);return(0,r.useEffect)(()=>{let t=n.current;if(!t)return;let r=t.getContext("2d");if(!r)return;r.imageSmoothingEnabled=!1;let{width:i,height:l}=function(){let e=Math.min(window.devicePixelRatio||1,1.25),t=Math.floor(window.screen.width*e),r=Math.floor(window.screen.height*e),n=t,a=r,o=n*a;if(o>518400){let e=Math.sqrt(518400/o);n=Math.floor(n*e),a=Math.floor(a*e)}return{width:n,height:a}}();function s(){let t=getComputedStyle(document.documentElement).getPropertyValue("--theme-ink").trim(),n=getComputedStyle(document.documentElement).getPropertyValue("--theme-accent").trim();r.fillStyle=t,r.fillRect(0,0,i,l),r.strokeStyle=n,r.lineWidth=4.2;let c=o.current*e.timeScale,d=i*l>2073600?2:e.step;for(let t=0;t<l;t+=d){r.beginPath();for(let n=0;n<i;n+=d)Math.abs(Math.sin(e.field(n,t,c)*e.scale))<e.threshold?r.lineTo(n,t):r.moveTo(n,t);r.stroke()}o.current++,a.current=requestAnimationFrame(s)}function c(){document.hidden&&a.current?(cancelAnimationFrame(a.current),a.current=null):document.hidden||a.current||s()}return t.width=i,t.height=l,t.style.width="100vw",t.style.height="100vh",t.style.objectFit="cover",s(),document.addEventListener("visibilitychange",c),()=>{a.current&&cancelAnimationFrame(a.current),document.removeEventListener("visibilitychange",c)}},[e]),(0,t.jsx)("canvas",{ref:n,className:"fixed inset-0 pointer-events-none block canvas-pixelated"})}e.s(["CanvasBackground",()=>n])},84762,94179,e=>{"use strict";var t=e.i(29511),r=e.i(47163);function n({className:e,...n}){return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,r.cn)("w-full min-h-24 px-3 py-2 text-sm font-bold resize-y border-[3px] border-foreground rounded-none bg-background text-foreground placeholder:text-foreground/50 transition-colors duration-150 focus-visible:bg-foreground focus-visible:text-background focus-visible:placeholder:text-background/60 outline-none focus-visible:outline focus-visible:outline-foreground focus-visible:outline-offset-2 aria-invalid:border-destructive aria-invalid:text-destructive disabled:pointer-events-none disabled:opacity-40",e),...n})}e.s(["Textarea",()=>n],84762);var a=e.i(83088);let o=(0,e.i(94237).cva)("inline-flex items-center justify-center border-2 border-foreground px-2 py-[2px] text-xs font-medium bg-background text-foreground whitespace-nowrap shrink-0 transition-colors focus-visible:outline focus-visible:outline-2 focus-visible:outline-foreground",{variants:{variant:{default:"",secondary:"opacity-80",destructive:"bg-foreground text-background border-foreground",outline:"bg-transparent"}},defaultVariants:{variant:"default"}});function i({className:e,variant:n,asChild:i=!1,...l}){let s=i?a.Slot:"span";return(0,t.jsx)(s,{"data-slot":"badge",className:(0,r.cn)(o({variant:n}),e),...l})}e.s(["Badge",()=>i],94179)},18422,e=>{"use strict";var t=e.i(29511),r=e.i(58138),n=e.i(9737),a=e.i(48128),o=e.i(89554),i=e.i(54848),l=e.i(70065),s=e.i(84762),c=e.i(94179),d=e.i(67881),u=e.i(21487);function f(){let{animIndex:e,randomTheme:f}=(0,o.useTheme)(),[m,g]=(0,r.useState)(""),[x,h]=(0,r.useState)([]),[p,b]=(0,r.useState)(null),v=(0,r.useRef)(new Map);function y(e){e.style.height="auto",e.style.height=e.scrollHeight+"px"}function j(e){g(e);try{let t=e.trim();if(!t){h([]),b(null),g("");return}let r=[],n=!1;for(let e of[w,N,C,S])try{r=e(t),n=!0;break}catch{continue}if(!n)throw Error("Could not parse input as JSON objects or array.");r=r.map(e=>(e.id||(e.id=crypto.randomUUID()),e)),h(r),b(null),g(JSON.stringify(r,null,2))}catch(e){b(e.message)}}function w(e){let t=JSON.parse(e);if(!Array.isArray(t))throw Error("Not an array");return t}function N(e){let t=e.split("\n").map(e=>e.trim()).filter(Boolean),r=[];for(let e of t)(e=e.replace(/,+\s*$/,""))&&r.push(JSON.parse(e));return r}function C(e){let t=[],r="",n=0;for(let a of e)if("{"===a&&n++,"}"===a&&n--,r+=a,0===n&&r.trim()){let e=r.replace(/,+\s*$/,"").trim();e&&t.push(JSON.parse(e)),r=""}return t}function S(e){let t=e.trim();if(!t.startsWith("[")||!t.endsWith("]"))throw Error("Not an array");let r=t.slice(1,-1),n=[],a="",o=0,i=!1;for(let e=0;e<r.length;e++){let t=r[e];'"'===t&&"\\"!==r[e-1]&&(i=!i),!i&&("{"===t&&o++,"}"===t&&o--),a+=t,!i&&0===o&&a.trim()&&(n.push(a.trim()),a="")}return n.map(e=>JSON.parse(e))}return(0,r.useEffect)(()=>{let e=localStorage.getItem("anon-json");e&&j(e)},[]),(0,r.useEffect)(()=>{m.trim()&&localStorage.setItem("anon-json",m)},[m]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.CanvasBackground,{animation:a.ANIMATIONS[e]}),(0,t.jsxs)("div",{className:"relative max-w-xl mx-auto p-4 text-foreground",children:[(0,t.jsx)(i.TopBar,{}),(0,t.jsxs)(l.Card,{className:"mb-4",children:[(0,t.jsx)(l.CardHeader,{children:(0,t.jsx)(l.CardTitle,{className:"text-sm",children:"anon.json"})}),(0,t.jsxs)(l.CardContent,{className:"flex flex-col gap-2",children:[(0,t.jsx)("p",{className:"text-sm leading-relaxed",children:"This is where I view the anonymous messages you send me."}),(0,t.jsx)(s.Textarea,{placeholder:'[ { "id": "...", "msg": "..." } ]',value:m,onChange:e=>j(e.target.value),className:"font-mono text-xs min-h-[140px]"}),(0,t.jsx)(s.Textarea,{placeholder:"Enter one date per line, matching message order",onChange:e=>{let t,r;return t=e.target.value.split("\n").map(e=>e.trim()).filter(Boolean),void(h(r=x.map((e,r)=>{let n=t[r];if(!n)return e;let a=new Date(n);return isNaN(a.getTime())?e:{...e,date:a.toISOString()}})),g(JSON.stringify(r,null,2)))},className:"font-mono text-xs min-h-[100px]"}),p&&(0,t.jsx)(c.Badge,{variant:"destructive",className:"w-fit",children:p})]}),(0,t.jsx)(l.CardFooter,{className:"text-xs"})]}),(0,t.jsx)("div",{className:"flex flex-col",children:x.map((e,n)=>(0,t.jsxs)(r.default.Fragment,{children:[(0,t.jsxs)(l.Card,{ref:t=>{let r=`${e.id}-${n}`;t?v.current.set(r,t):v.current.delete(r)},children:[(0,t.jsx)(l.CardHeader,{children:(0,t.jsxs)(l.CardTitle,{className:"text-sm flex items-center gap-2",children:[e.name||"anon",(0,t.jsx)("span",{className:"text-xs opacity-50",children:new Date(e.date).toLocaleString()})]})}),(0,t.jsxs)(l.CardContent,{className:"flex flex-col gap-2",children:[(0,t.jsx)("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:e.msg}),e.url&&(0,t.jsx)("img",{src:e.url,crossOrigin:"anonymous",className:"border-3 object-contain w-full h-auto",alt:"anon attachment"})]})]}),(0,t.jsx)(s.Textarea,{value:e.raw??JSON.stringify(e,null,2),onClick:e=>{y(e.currentTarget)},onChange:t=>{y(t.currentTarget);let r=t.target.value;h(e=>{let t=[...e];return t[n]={...t[n],raw:r},t});try{let t=JSON.parse(r);t.id=e.id,h(e=>{let a=[...e];return a[n]={...t,raw:r},a}),b(null)}catch(e){b(`Invalid JSON for message ${n+1}`)}},onKeyDown:e=>{if("Tab"===e.key){e.preventDefault();let t=e.currentTarget,r=t.selectionStart,a=t.selectionEnd,o=t.value,i=o.substring(0,r)+"  "+o.substring(a);t.value=i,t.selectionStart=t.selectionEnd=r+2,h(e=>{let t=[...e];return t[n]={...t[n],raw:i},t})}},className:"font-mono text-xs my-1 resize-none overflow-hidden"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 sm:flex gap-1 mb-6",children:[(0,t.jsx)(d.Button,{className:"flex-1 font-mono text-xs",onClick:async()=>{let t=v.current.get(`${e.id}-${n}`);if(!t)return;let r=(await (0,u.default)(t,{scale:4,useCORS:!0,allowTaint:!1,logging:!0})).toDataURL("image/png"),a=document.createElement("a");a.href=r,a.download=`message-${e.id}.png`,a.click()},children:"Download Image"}),(0,t.jsx)(d.Button,{className:"flex-1 font-mono text-xs",onClick:async()=>{let t=v.current.get(`${e.id}-${n}`);t&&(await (0,u.default)(t,{scale:4,useCORS:!0,allowTaint:!1})).toBlob(async e=>{if(e)try{await navigator.clipboard.write([new ClipboardItem({[e.type]:e})]),alert("Image copied to clipboard!")}catch(e){console.error("Failed to copy image:",e)}},"image/png")},children:"Copy Image"}),(0,t.jsx)(d.Button,{className:"flex-1 font-mono text-xs",onClick:async()=>{let t=e.name??"anon",r=new Date(e.date).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"2-digit",second:"2-digit",hour12:!0}),n=`${t}:
(${r})
"${e.msg}"`;try{await navigator.clipboard.writeText(n),alert("Formatted text copied!")}catch(e){console.error("Copy failed:",e)}},children:"Copy as Quote"}),(0,t.jsx)(d.Button,{className:"flex-1 font-mono text-xs",onClick:()=>{h(e=>e.filter((e,t)=>t!==n))},children:"Done"})]})]},`${e.id}-${n}`))})]})]})}e.s(["default",()=>f])}]);